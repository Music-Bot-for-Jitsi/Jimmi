var Ue=Object.defineProperty;var Be=(n,e,t)=>e in n?Ue(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var I=(n,e,t)=>(Be(n,typeof e!="symbol"?e+"":e,t),t),Pe=(n,e,t)=>{if(!e.has(n))throw TypeError("Cannot "+t)};var re=(n,e,t)=>(Pe(n,e,"read from private field"),t?t.call(n):e.get(n)),ne=(n,e,t)=>{if(e.has(n))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(n):e.set(n,t)},ie=(n,e,t,r)=>(Pe(n,e,"write to private field"),r?r.call(n,t):e.set(n,t),t);import{X as Ie,m as Me,y as ze,$ as He,I as Je,S as ge,i as be,s as ye,e as u,t as b,a,b as B,c as s,d as y,f as M,g as h,h as S,l as T,n as V,r as Ye,j as se,k as Ke,o as Qe,p as we,q as We,u as Xe,v as Ge,w as oe,x as $e,z as Ze,A as et,B as tt,R as rt,C as nt,D as it}from"./vendor.1dd66362.js";const st=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function t(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerpolicy&&(o.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?o.credentials="include":i.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=t(i);fetch(i.href,o)}};st();const ot="modulepreload",Se={},at="/",Ve=function(e,t){return!t||t.length===0?e():Promise.all(t.map(r=>{if(r=`${at}${r}`,r in Se)return;Se[r]=!0;const i=r.endsWith(".css"),o=i?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${r}"]${o}`))return;const c=document.createElement("link");if(c.rel=i?"stylesheet":ot,i||(c.as="script",c.crossOrigin=""),c.href=r,document.head.appendChild(c),i)return new Promise((R,j)=>{c.addEventListener("load",R),c.addEventListener("error",j)})})).then(()=>e())};class lt{constructor(e){I(this,"translator");this.api=e,Ie.subscribe(t=>this.translator=t)}$t(e,t){return this.translator?this.translator(`plugins.${this.meta.id}.${e}`,t):""}}var z,H,J;class ut{constructor(e){ne(this,z,void 0);ne(this,H,void 0);ne(this,J,void 0);ie(this,z,e.videoThumbnails[0].url),ie(this,H,e.title),ie(this,J,e.adaptiveFormats.filter(t=>t.encoding==="opus")[0].url)}get thumbnailUrl(){return re(this,z)}get title(){return re(this,H)}get source(){return re(this,J)}}z=new WeakMap,H=new WeakMap,J=new WeakMap;class ct extends lt{constructor(e){super(e);I(this,"meta",{id:"xyz.jimmi.music",name:"Music",version:"0.2.0"});I(this,"commands",{play:this.play.bind(this),queue:this.queue.bind(this),cue:this.queue.bind(this),track:this.track.bind(this)});I(this,"translations",{en:{description:"A music plugin that allows for audio playback of youtube videos",commands:{play:{usage:"!play <url|searchTerm> - Play a youtube video by url or search term",playingTrack:"Playing {title}"},queue:{usage:`!<queue|cue> - Show the current queue.
  !<queue|cue> <url|searchTerm> - Add a youtube video to the queue.
          `,isEmpty:"The queue is currently empty",content:"Queue content",addedTrack:"Added {title} to queue"},track:{usage:"`!track` - Display current track\n  `!track skip` - Skip the current track\n  `!track ++` or `!track --` - Fast forward or rewind. Add more `+` or `-` signs to increase duration\n  `!track +10`, `!track +20`, `!track -15` - Fast forward or rewind with specific duration in seconds\n          ",currentlyPlaying:"Currently playing {title ?? 'nothing'}"}},general:{invalidArgs:"Invalid arguments. Usage:",noVideo:"Sorry, I cannot find any video at the moment"}}});I(this,"baseUrl","https://invidious.snopyta.org");this.fetch.bind(this),this.searchYtVideo.bind(this),this.getTrack.bind(this),this.query.bind(this),this.play.bind(this),this.track.bind(this)}async fetch(e){return await(await fetch(`${this.baseUrl}/api/v1/${e}`,{referrerPolicy:"no-referrer"})).json()}async searchYtVideo(e){const t=await this.fetch(`search/?q=${encodeURIComponent(e)}`);return t.length>0?t[0].videoId:null}async getTrack(e){const t=await this.fetch(`videos/${e}`);return t.error?null:new ut(t)}async query(e){const t=e.join(" "),r=await this.searchYtVideo(t);return r?this.getTrack(r):null}async play(e){if(e.params.length===0)e.respond(`:warning: ${this.$t("general.invalidArgs")}
${this.$t("commands.play.usage")}`);else{const t=await this.query(e.params);if(!t){e.respond(`${this.$t("general.noVideo")} :worried:`);return}this.api.currentTrack=t,this.api.sendMessage(`:notes: ${this.$t("commands.play.playingTrack",{values:{title:t.title}})}`)}}async queue(e){if(e.params.length===0)if(this.api.queue.length===0)e.respond(`:notes: ${this.$t("commands.queue.isEmpty")}`);else{let t=0;const r=new RegExp(/(\d)/ig);e.respond(this.api.queue.reduce((i,o)=>`${i}
${(++t).toString().replaceAll(r,":$1:")} ${o.title}`,`:notes: ${this.$t("commands.queue.content")}`))}else{const t=await this.query(e.params);if(!t){e.respond(`${this.$t("general.noVideo")} :worried:`);return}this.api.currentTrack?this.api.queue.push(t):this.api.currentTrack=t,e.respond(`:notes: ${this.$t("commands.queue.addedTrack",{values:{title:t.title}})}`)}}async track(e){var t;switch(e.params.length){case 0:e.respond(`:notes: ${this.$t("commands.track.currentlyPlaying",{values:{title:(t=this.api.currentTrack)==null?void 0:t.title}})}`);break;case 1:const r=e.params[0];if(r==="skip"){this.api.currentTrack=void 0;return}let i=0;const o=c=>2*Math.E^c-1;/^\+\++$/.test(r)?i=o(r.length):/^--+$/.test(r)?i=-o(r.length):i=parseInt(r,10),i?this.api.forward(i):e.respond(`:warning: ${this.$t("general.invalidArgs")}
${this.$t("commands.track.usage")}`);break;default:e.respond(`:warning: ${this.$t("general.invalidArgs")}
${this.$t("commands.track.usage")}`)}}}const dt={default:{jitsiDisplayName:"DJ Jim",initialVolume:20},url:"https://jimmi.xyz",logo:"/jim.svg",plugins:[ct]};function Oe(n,e){if(n.length===0)return e;let t={};return t[n.pop()]=e,Oe(n,t)}dt.plugins.forEach(n=>{const e=new n({});e.translations&&Object.keys(e.translations).forEach(t=>{const r=Oe(e.meta.id.split("."),e.translations[t]);Me(t,{plugins:r})})});ze("en",()=>Ve(()=>import("./en.0ff1cf91.js"),[]));function mt(){He({fallbackLocale:"en",initialLocale:Je()})}function Fe(n){let e,t=n[2]("routes.home.domainError")+"",r;return{c(){e=u("p"),r=b(t),a(e,"class","text-xs text-red-500 mt-3")},m(i,o){B(i,e,o),s(e,r)},p(i,o){o&4&&t!==(t=i[2]("routes.home.domainError")+"")&&y(r,t)},d(i){i&&M(e)}}}function De(n){let e,t=n[2]("routes.home.roomError")+"",r;return{c(){e=u("p"),r=b(t),a(e,"class","text-xs text-red-500 mt-3")},m(i,o){B(i,e,o),s(e,r)},p(i,o){o&4&&t!==(t=i[2]("routes.home.roomError")+"")&&y(r,t)},d(i){i&&M(e)}}}function pt(n){let e,t,r,i,o=n[2]("routes.home.mainContent.heading")+"",c,R,j,k=n[2]("routes.home.mainContent.description")+"",L,Y,m,C,x=n[2]("routes.home.joinRoomHeading")+"",O,w,$,F,K=n[2]("routes.home.domainLabel")+"",ae,_e,g,ve,ke,q,D,Q=n[2]("routes.home.roomLabel")+"",le,qe,_,je,Ee,W,E,ue,X=n[2]("general.advancedConfiguration")+"",ce,Te,N,G=n[2]("general.password")+"",de,Re,v,Le,U,Z=n[2]("routes.home.joinButtonText")+"",me,Ce,A,ee=n[2]("routes.home.joinRoomFootnote")+"",pe,xe,P,fe,te,he,Ae,p=n[3].domain&&Fe(n),f=n[3].room&&De(n);return{c(){e=u("section"),t=u("div"),r=u("div"),i=u("h1"),c=b(o),R=h(),j=u("p"),L=b(k),Y=h(),m=u("form"),C=u("h2"),O=b(x),w=h(),$=u("div"),F=u("label"),ae=b(K),_e=h(),g=u("input"),ve=h(),p&&p.c(),ke=h(),q=u("div"),D=u("label"),le=b(Q),qe=h(),_=u("input"),je=h(),f&&f.c(),Ee=h(),W=u("div"),E=u("details"),ue=u("summary"),ce=b(X),Te=h(),N=u("label"),de=b(G),Re=h(),v=u("input"),Le=h(),U=u("button"),me=b(Z),Ce=h(),A=u("p"),pe=b(ee),xe=h(),P=u("a"),fe=b(n[1]),a(i,"class","title-font font-medium text-3xl text-gray-900"),a(j,"class","leading-relaxed mt-4"),a(r,"class","lg:w-3/5 md:w-1/2 md:pr-16 lg:pr-0 pr-0"),a(C,"class","text-gray-900 text-lg font-medium title-font mb-5"),a(F,"for","domain"),a(F,"class","leading-7 text-sm text-gray-600"),a(g,"type","text"),a(g,"id","domain"),a(g,"name","domain"),a(g,"placeholder","meet.jit.si"),a(g,"class","w-full bg-white rounded border border-gray-300 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 text-base outline-none text-gray-700 py-1 px-3 leading-8 transition-colors duration-200 ease-in-out"),a($,"class","relative mb-4"),a(D,"for","room"),a(D,"class","leading-7 text-sm text-gray-600"),a(_,"type","text"),a(_,"id","room"),a(_,"name","room"),a(_,"class","w-full bg-white rounded border border-gray-300 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 text-base outline-none text-gray-700 py-1 px-3 leading-8 transition-colors duration-200 ease-in-out"),a(q,"class","relative mb-4"),a(N,"for","domain"),a(N,"class","leading-7 text-sm text-gray-600"),a(v,"type","password"),a(v,"id","password"),a(v,"name","password"),a(v,"class","w-full bg-white rounded border border-gray-300 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 text-base outline-none text-gray-700 py-1 px-3 leading-8 transition-colors duration-200 ease-in-out"),a(W,"class","relative mb-4"),a(U,"class","disabled:opacity-50 text-white bg-indigo-500 border-0 py-2 px-8 focus:outline-none hover:bg-indigo-600 rounded text-lg"),a(U,"type","submit"),a(P,"class","text-indigo-500 break-words"),a(P,"href",te=`https://${n[1]}`),a(A,"class","text-xs text-gray-500 mt-3"),a(m,"class","lg:w-2/6 md:w-1/2 bg-gray-100 rounded-lg p-8 flex flex-col md:ml-auto w-full mt-10 md:mt-0"),a(t,"class","container px-5 py-24 mx-auto flex flex-wrap items-center"),a(e,"class","text-gray-600 body-font")},m(l,d){B(l,e,d),s(e,t),s(t,r),s(r,i),s(i,c),s(r,R),s(r,j),s(j,L),s(t,Y),s(t,m),s(m,C),s(C,O),s(m,w),s(m,$),s($,F),s(F,ae),s($,_e),s($,g),S(g,n[0].domain),s($,ve),p&&p.m($,null),s(m,ke),s(m,q),s(q,D),s(D,le),s(q,qe),s(q,_),S(_,n[0].room),s(q,je),f&&f.m(q,null),s(m,Ee),s(m,W),s(W,E),s(E,ue),s(ue,ce),s(E,Te),s(E,N),s(N,de),s(E,Re),s(E,v),S(v,n[0].password),s(m,Le),s(m,U),s(U,me),s(m,Ce),s(m,A),s(A,pe),s(A,xe),s(A,P),s(P,fe),he||(Ae=[T(g,"change",n[6]),T(g,"input",n[8]),T(_,"change",n[6]),T(_,"input",n[9]),T(v,"change",n[6]),T(v,"input",n[10]),T(m,"submit",n[7])],he=!0)},p(l,[d]){d&4&&o!==(o=l[2]("routes.home.mainContent.heading")+"")&&y(c,o),d&4&&k!==(k=l[2]("routes.home.mainContent.description")+"")&&y(L,k),d&4&&x!==(x=l[2]("routes.home.joinRoomHeading")+"")&&y(O,x),d&4&&K!==(K=l[2]("routes.home.domainLabel")+"")&&y(ae,K),d&1&&g.value!==l[0].domain&&S(g,l[0].domain),l[3].domain?p?p.p(l,d):(p=Fe(l),p.c(),p.m($,null)):p&&(p.d(1),p=null),d&4&&Q!==(Q=l[2]("routes.home.roomLabel")+"")&&y(le,Q),d&1&&_.value!==l[0].room&&S(_,l[0].room),l[3].room?f?f.p(l,d):(f=De(l),f.c(),f.m(q,null)):f&&(f.d(1),f=null),d&4&&X!==(X=l[2]("general.advancedConfiguration")+"")&&y(ce,X),d&4&&G!==(G=l[2]("general.password")+"")&&y(de,G),d&1&&v.value!==l[0].password&&S(v,l[0].password),d&4&&Z!==(Z=l[2]("routes.home.joinButtonText")+"")&&y(me,Z),d&4&&ee!==(ee=l[2]("routes.home.joinRoomFootnote")+"")&&y(pe,ee),d&2&&y(fe,l[1]),d&2&&te!==(te=`https://${l[1]}`)&&a(P,"href",te)},i:V,o:V,d(l){l&&M(e),p&&p.d(),f&&f.d(),he=!1,Ye(Ae)}}}function ft(n,e,t){let r,i,o,c;se(n,Ie,w=>t(2,o=w));const R=new RegExp(/^$|^((?:(?:(?:\w[\.\-\+]?)*)\w)+)((?:(?:(?:\w[\.\-\+]?){0,62})\w)+)\.(\w{2,6})$/),j=new RegExp(/^[^?&:"'%#]+$/),{form:k,errors:L,handleChange:Y,handleSubmit:m}=Ke({initialValues:{domain:"",room:"",password:""},validationSchema:Qe().shape({domain:we().trim().matches(R),room:we().trim().min(1).matches(j).required(),password:we().optional()}),onSubmit:w=>{const $=w.password?`?password=${w.password}`:"";We(`/bot/${r}${$}`)}});se(n,k,w=>t(0,i=w)),se(n,L,w=>t(3,c=w));function C(){i.domain=this.value,k.set(i)}function x(){i.room=this.value,k.set(i)}function O(){i.password=this.value,k.set(i)}return n.$$.update=()=>{n.$$.dirty&1&&t(1,r=`${i.domain||"meet.jit.si"}/${i.room}`)},[i,r,o,c,k,L,Y,m,C,x,O]}class ht extends ge{constructor(e){super();be(this,e,ft,pt,ye,{})}}function gt(n){let e;return{c(){e=u("p"),e.textContent="404 - Not found"},m(t,r){B(t,e,r)},p:V,i:V,o:V,d(t){t&&M(e)}}}class bt extends ge{constructor(e){super();be(this,e,null,gt,ye,{})}}function Ne(n){let e,t;return e=new rt({props:{routes:n[1]}}),{c(){Xe(e.$$.fragment)},m(r,i){Ge(e,r,i),t=!0},p:V,i(r){t||(oe(e.$$.fragment,r),t=!0)},o(r){$e(e.$$.fragment,r),t=!1},d(r){Ze(e,r)}}}function yt(n){let e,t,r=!n[0]&&Ne(n);return{c(){e=u("main"),r&&r.c(),a(e,"class","h-screen")},m(i,o){B(i,e,o),r&&r.m(e,null),t=!0},p(i,[o]){i[0]?r&&(nt(),$e(r,1,1,()=>{r=null}),et()):r?(r.p(i,o),o&1&&oe(r,1)):(r=Ne(i),r.c(),oe(r,1),r.m(e,null))},i(i){t||(oe(r),t=!0)},o(i){$e(r),t=!1},d(i){i&&M(e),r&&r.d()}}}function wt(n,e,t){let r;se(n,it,o=>t(0,r=o)),mt();const i={"/":ht,"/bot/:instance/:room":tt({asyncComponent:()=>Ve(()=>import("./Bot.1ae5948f.js"),["assets/Bot.1ae5948f.js","assets/Bot.410f3981.css","assets/vendor.1dd66362.js"])}),"*":bt};return[r,i]}class $t extends ge{constructor(e){super();be(this,e,wt,yt,ye,{})}}new $t({target:document.getElementById("app")});export{dt as c};

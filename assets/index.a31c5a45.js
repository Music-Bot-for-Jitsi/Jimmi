var He=Object.defineProperty;var Ye=(r,e,t)=>e in r?He(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var V=(r,e,t)=>(Ye(r,typeof e!="symbol"?e+"":e,t),t),Pe=(r,e,t)=>{if(!e.has(r))throw TypeError("Cannot "+t)};var oe=(r,e,t)=>(Pe(r,e,"read from private field"),t?t.call(r):e.get(r)),se=(r,e,t)=>{if(e.has(r))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(r):e.set(r,t)},ne=(r,e,t,o)=>(Pe(r,e,"write to private field"),o?o.call(r,t):e.set(r,t),t);import{X as Se,m as ze,y as Ge,$ as Ke,I as Qe,S as ie,i as ae,s as le,e as u,t as f,a,b as O,c as i,d as k,f as U,g as p,h as D,l as P,n as A,r as We,j as ue,k as Xe,o as Ze,p as $e,q as et,u as Fe,v as Ve,w as H,x as ce,z as Oe,A as tt,B as rt,R as ot,C as st,D as nt}from"./vendor.0afdd21e.js";const it=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))o(s);new MutationObserver(s=>{for(const n of s)if(n.type==="childList")for(const l of n.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&o(l)}).observe(document,{childList:!0,subtree:!0});function t(s){const n={};return s.integrity&&(n.integrity=s.integrity),s.referrerpolicy&&(n.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?n.credentials="include":s.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function o(s){if(s.ep)return;s.ep=!0;const n=t(s);fetch(s.href,n)}};it();const at="modulepreload",Ue={},lt="/",De=function(e,t){return!t||t.length===0?e():Promise.all(t.map(o=>{if(o=`${lt}${o}`,o in Ue)return;Ue[o]=!0;const s=o.endsWith(".css"),n=s?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${o}"]${n}`))return;const l=document.createElement("link");if(l.rel=s?"stylesheet":at,s||(l.as="script",l.crossOrigin=""),l.href=o,document.head.appendChild(l),s)return new Promise((h,w)=>{l.addEventListener("load",h),l.addEventListener("error",w)})})).then(()=>e())};class ut{constructor(e){V(this,"translator");this.api=e,Se.subscribe(t=>this.translator=t)}$t(e,t){return this.translator?this.translator(`plugins.${this.meta.id}.${e}`,t):""}}var Y,z,G;class ct{constructor(e){se(this,Y,void 0);se(this,z,void 0);se(this,G,void 0);ne(this,Y,e.videoThumbnails[0].url),ne(this,z,e.title),ne(this,G,e.adaptiveFormats.filter(t=>t.encoding==="opus")[0].url)}get thumbnailUrl(){return oe(this,Y)}get title(){return oe(this,z)}get source(){return oe(this,G)}}Y=new WeakMap,z=new WeakMap,G=new WeakMap;class dt extends ut{constructor(e){super(e);V(this,"meta",{id:"xyz.jimmi.music",name:"Music",version:"0.2.0"});V(this,"commands",{play:this.play,queue:this.queue,cue:this.queue,track:this.track});V(this,"translations",{en:{description:"A music plugin that allows for audio playback of youtube videos",commands:{play:{usage:"!play <url|searchTerm> - Play a youtube video by url or search term",playingTrack:"Playing {title}"},queue:{usage:`!queue - Show the current queue.
!queue <url|searchTerm> - Add a YouTube video to the queue.`,isEmpty:"The queue is currently empty",content:"Queue content",addedTrack:"Added {title} to queue"},cue:{usage:"!cue - Alias for !queue"},track:{usage:`!track - Display current track
!track skip - Skip the current track
!track ++ or !track -- - Fast forward or rewind. Add more + or - signs to increase duration
!track +10, !track +20, !track -15 - Fast forward or rewind with specific duration in seconds`,currentlyPlaying:"Currently playing {title ?? 'nothing'}"}},general:{invalidArgs:"Invalid arguments. Usage:",noVideo:"Sorry, I cannot find any video at the moment"}}});V(this,"baseUrl","https://invidious.snopyta.org");this.fetch,this.searchYtVideo,this.getTrack,this.query,this.play,this.track}async fetch(e){return await(await fetch(`${this.baseUrl}/api/v1/${e}`,{referrerPolicy:"no-referrer"})).json()}async searchYtVideo(e){const t=await this.fetch(`search/?q=${encodeURIComponent(e)}`);return t.length>0?t[0].videoId:null}async getTrack(e){const t=await this.fetch(`videos/${e}`);return t.error?null:new ct(t)}async query(e){const t=e.join(" "),o=await this.searchYtVideo(t);return o?this.getTrack(o):null}async play(e){if(e.params.length===0)e.respond(`:warning: ${this.$t("general.invalidArgs")}
${this.$t("commands.play.usage")}`);else{const t=await this.query(e.params);if(!t){e.respond(`${this.$t("general.noVideo")} :worried:`);return}this.api.currentTrack=t,this.api.sendMessage(`:notes: ${this.$t("commands.play.playingTrack",{values:{title:t.title}})}`)}}async queue(e){if(e.params.length===0)if(this.api.queue.length===0)e.respond(`:notes: ${this.$t("commands.queue.isEmpty")}`);else{let t=0;const o=new RegExp(/(\d)/ig);e.respond(this.api.queue.reduce((s,n)=>`${s}
${(++t).toString().replaceAll(o,":$1:")} ${n.title}`,`:notes: ${this.$t("commands.queue.content")}`))}else{const t=await this.query(e.params);if(!t){e.respond(`${this.$t("general.noVideo")} :worried:`);return}this.api.currentTrack?this.api.queue.push(t):this.api.currentTrack=t,e.respond(`:notes: ${this.$t("commands.queue.addedTrack",{values:{title:t.title}})}`)}}async track(e){var t;switch(e.params.length){case 0:e.respond(`:notes: ${this.$t("commands.track.currentlyPlaying",{values:{title:(t=this.api.currentTrack)==null?void 0:t.title}})}`);break;case 1:const o=e.params[0];if(o==="skip"){this.api.currentTrack=void 0;return}let s=0;const n=l=>2*Math.E^l-1;/^\+\++$/.test(o)?s=n(o.length):/^--+$/.test(o)?s=-n(o.length):s=parseInt(o,10),s?this.api.forward(s):e.respond(`:warning: ${this.$t("general.invalidArgs")}
${this.$t("commands.track.usage")}`);break;default:e.respond(`:warning: ${this.$t("general.invalidArgs")}
${this.$t("commands.track.usage")}`)}}}const ve={default:{jitsiDisplayName:"DJ Jim",initialVolume:20},repoUrl:"https://github.com/p-fruck/Jimmi",url:"https://jimmi.xyz",logo:"/jimmi.svg",plugins:[dt]};function Me(r,e){if(r.length===0)return e;let t={};return t[r.pop()]=e,Me(r,t)}ve.plugins.forEach(r=>{const e=new r({});e.translations&&Object.keys(e.translations).forEach(t=>{const o=Me(e.meta.id.split("."),e.translations[t]);ze(t,{plugins:o})})});Ge("en",()=>De(()=>import("./en.a40b75af.js"),[]));function mt(){Ke({fallbackLocale:"en",initialLocale:Qe()})}function Ne(r){let e,t=r[2]("routes.home.domainError")+"",o;return{c(){e=u("p"),o=f(t),a(e,"class","text-xs text-red-500 mt-3")},m(s,n){O(s,e,n),i(e,o)},p(s,n){n&4&&t!==(t=s[2]("routes.home.domainError")+"")&&k(o,t)},d(s){s&&U(e)}}}function Be(r){let e,t=r[2]("routes.home.roomError")+"",o;return{c(){e=u("p"),o=f(t),a(e,"class","text-xs text-red-500 mt-3")},m(s,n){O(s,e,n),i(e,o)},p(s,n){n&4&&t!==(t=s[2]("routes.home.roomError")+"")&&k(o,t)},d(s){s&&U(e)}}}function pt(r){let e,t,o,s,n=r[2]("routes.home.mainContent.heading")+"",l,h,w,$=r[2]("routes.home.mainContent.description")+"",x,E,d,g,R=r[2]("routes.home.joinRoomHeading")+"",C,v,q,M,K=r[2]("routes.home.domainLabel")+"",de,_e,_,ke,xe,L,N,Q=r[2]("routes.home.roomLabel")+"",me,qe,j,je,Te,W,I,pe,X=r[2]("general.advancedConfiguration")+"",fe,Ee,B,Z=r[2]("general.password")+"",he,Re,T,Ce,J,ee=r[2]("routes.home.joinButtonText")+"",ge,Le,S,te=r[2]("routes.home.joinRoomFootnote")+"",ye,Ae,F,be,re,we,Ie,y=r[3].domain&&Ne(r),b=r[3].room&&Be(r);return{c(){e=u("section"),t=u("div"),o=u("div"),s=u("h1"),l=f(n),h=p(),w=u("p"),x=f($),E=p(),d=u("form"),g=u("h2"),C=f(R),v=p(),q=u("div"),M=u("label"),de=f(K),_e=p(),_=u("input"),ke=p(),y&&y.c(),xe=p(),L=u("div"),N=u("label"),me=f(Q),qe=p(),j=u("input"),je=p(),b&&b.c(),Te=p(),W=u("div"),I=u("details"),pe=u("summary"),fe=f(X),Ee=p(),B=u("label"),he=f(Z),Re=p(),T=u("input"),Ce=p(),J=u("button"),ge=f(ee),Le=p(),S=u("p"),ye=f(te),Ae=p(),F=u("a"),be=f(r[1]),a(s,"class","title-font font-medium text-3xl text-gray-900"),a(w,"class","leading-relaxed mt-4"),a(o,"class","lg:w-3/5 md:w-1/2 md:pr-16 lg:pr-0 pr-0"),a(g,"class","text-gray-900 text-lg font-medium title-font mb-5"),a(M,"for","domain"),a(M,"class","leading-7 text-sm text-gray-600"),a(_,"type","text"),a(_,"id","domain"),a(_,"name","domain"),a(_,"placeholder","meet.jit.si"),a(_,"class","w-full bg-white rounded border border-gray-300 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 text-base outline-none text-gray-700 py-1 px-3 leading-8 transition-colors duration-200 ease-in-out"),a(q,"class","relative mb-4"),a(N,"for","room"),a(N,"class","leading-7 text-sm text-gray-600"),a(j,"type","text"),a(j,"id","room"),a(j,"name","room"),a(j,"class","w-full bg-white rounded border border-gray-300 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 text-base outline-none text-gray-700 py-1 px-3 leading-8 transition-colors duration-200 ease-in-out"),a(L,"class","relative mb-4"),a(B,"for","domain"),a(B,"class","leading-7 text-sm text-gray-600"),a(T,"type","password"),a(T,"id","password"),a(T,"name","password"),a(T,"class","w-full bg-white rounded border border-gray-300 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 text-base outline-none text-gray-700 py-1 px-3 leading-8 transition-colors duration-200 ease-in-out"),a(W,"class","relative mb-4"),a(J,"class","disabled:opacity-50 text-white bg-indigo-500 border-0 py-2 px-8 focus:outline-none hover:bg-indigo-600 rounded text-lg"),a(J,"type","submit"),a(F,"class","text-indigo-500 break-words"),a(F,"href",re=`https://${r[1]}`),a(S,"class","text-xs text-gray-500 mt-3"),a(d,"class","lg:w-2/6 md:w-1/2 bg-gray-100 rounded-lg p-8 flex flex-col md:ml-auto w-full mt-10 md:mt-0"),a(t,"class","container px-5 py-24 mx-auto flex flex-wrap items-center"),a(e,"class","text-gray-600 body-font")},m(c,m){O(c,e,m),i(e,t),i(t,o),i(o,s),i(s,l),i(o,h),i(o,w),i(w,x),i(t,E),i(t,d),i(d,g),i(g,C),i(d,v),i(d,q),i(q,M),i(M,de),i(q,_e),i(q,_),D(_,r[0].domain),i(q,ke),y&&y.m(q,null),i(d,xe),i(d,L),i(L,N),i(N,me),i(L,qe),i(L,j),D(j,r[0].room),i(L,je),b&&b.m(L,null),i(d,Te),i(d,W),i(W,I),i(I,pe),i(pe,fe),i(I,Ee),i(I,B),i(B,he),i(I,Re),i(I,T),D(T,r[0].password),i(d,Ce),i(d,J),i(J,ge),i(d,Le),i(d,S),i(S,ye),i(S,Ae),i(S,F),i(F,be),we||(Ie=[P(_,"change",r[6]),P(_,"input",r[8]),P(j,"change",r[6]),P(j,"input",r[9]),P(T,"change",r[6]),P(T,"input",r[10]),P(d,"submit",r[7])],we=!0)},p(c,[m]){m&4&&n!==(n=c[2]("routes.home.mainContent.heading")+"")&&k(l,n),m&4&&$!==($=c[2]("routes.home.mainContent.description")+"")&&k(x,$),m&4&&R!==(R=c[2]("routes.home.joinRoomHeading")+"")&&k(C,R),m&4&&K!==(K=c[2]("routes.home.domainLabel")+"")&&k(de,K),m&1&&_.value!==c[0].domain&&D(_,c[0].domain),c[3].domain?y?y.p(c,m):(y=Ne(c),y.c(),y.m(q,null)):y&&(y.d(1),y=null),m&4&&Q!==(Q=c[2]("routes.home.roomLabel")+"")&&k(me,Q),m&1&&j.value!==c[0].room&&D(j,c[0].room),c[3].room?b?b.p(c,m):(b=Be(c),b.c(),b.m(L,null)):b&&(b.d(1),b=null),m&4&&X!==(X=c[2]("general.advancedConfiguration")+"")&&k(fe,X),m&4&&Z!==(Z=c[2]("general.password")+"")&&k(he,Z),m&1&&T.value!==c[0].password&&D(T,c[0].password),m&4&&ee!==(ee=c[2]("routes.home.joinButtonText")+"")&&k(ge,ee),m&4&&te!==(te=c[2]("routes.home.joinRoomFootnote")+"")&&k(ye,te),m&2&&k(be,c[1]),m&2&&re!==(re=`https://${c[1]}`)&&a(F,"href",re)},i:A,o:A,d(c){c&&U(e),y&&y.d(),b&&b.d(),we=!1,We(Ie)}}}function ft(r,e,t){let o,s,n,l;ue(r,Se,v=>t(2,n=v));const h=new RegExp(/^$|^((?:(?:(?:\w[\.\-\+]?)*)\w)+)((?:(?:(?:\w[\.\-\+]?){0,62})\w)+)\.(\w{2,6})$/),w=new RegExp(/^[^?&:"'%#]+$/),{form:$,errors:x,handleChange:E,handleSubmit:d}=Xe({initialValues:{domain:"",room:"",password:""},validationSchema:Ze().shape({domain:$e().trim().matches(h),room:$e().trim().min(1).matches(w).required(),password:$e().optional()}),onSubmit:v=>{const q=v.password?`?password=${v.password}`:"";et(`/bot/${o}${q}`)}});ue(r,$,v=>t(0,s=v)),ue(r,x,v=>t(3,l=v));function g(){s.domain=this.value,$.set(s)}function R(){s.room=this.value,$.set(s)}function C(){s.password=this.value,$.set(s)}return r.$$.update=()=>{r.$$.dirty&1&&t(1,o=`${s.domain||"meet.jit.si"}/${s.room}`)},[s,o,n,l,$,x,E,d,g,R,C]}class ht extends ie{constructor(e){super();ae(this,e,ft,pt,le,{})}}function gt(r){let e;return{c(){e=u("p"),e.textContent="404 - Not found"},m(t,o){O(t,e,o)},p:A,i:A,o:A,d(t){t&&U(e)}}}class yt extends ie{constructor(e){super();ae(this,e,null,gt,le,{})}}function bt(r){let e,t,o,s,n,l,h,w,$,x,E,d,g,R;return{c(){e=u("footer"),t=u("div"),o=u("div"),s=u("div"),n=u("a"),l=f("JIMMI"),h=p(),w=u("p"),w.textContent="Still under heavy development",$=p(),x=u("div"),E=u("p"),d=f(`Fork me on
          `),g=u("a"),R=f("GitHub"),a(n,"href",ve.url),a(n,"class","ml-3 text-xl"),a(w,"class","text-sm text-gray-500 ml-4 pl-4 border-l-2 border-gray-200 sm:py-2 sm:mt-0"),a(s,"class","flex items-center md:justify-start justify-center text-gray-900"),a(g,"href",ve.repoUrl),a(g,"class","text-indigo-500 ml-1"),a(g,"target","_blank"),a(g,"rel","noopener noreferrer"),a(E,"class","text-sm text-gray-500"),a(x,"class","sm:ml-auto sm:py-2 sm:mt-0 mt-4 sm:text-left text-center text-gray-500 text-sm"),a(o,"class","container mx-auto py-4 px-5 flex flex-wrap flex-col sm:flex-row"),a(t,"class","bg-gray-100 "),a(e,"class","text-gray-600 body-font absolute bottom-0 w-screen")},m(C,v){O(C,e,v),i(e,t),i(t,o),i(o,s),i(s,n),i(n,l),i(s,h),i(s,w),i(o,$),i(o,x),i(x,E),i(E,d),i(E,g),i(g,R)},p:A,i:A,o:A,d(C){C&&U(e)}}}class wt extends ie{constructor(e){super();ae(this,e,null,bt,le,{})}}function Je(r){let e,t;return e=new ot({props:{routes:r[1]}}),{c(){Fe(e.$$.fragment)},m(o,s){Ve(e,o,s),t=!0},p:A,i(o){t||(H(e.$$.fragment,o),t=!0)},o(o){ce(e.$$.fragment,o),t=!1},d(o){Oe(e,o)}}}function $t(r){let e,t,o,s,n=!r[0]&&Je(r);return o=new wt({}),{c(){e=u("main"),n&&n.c(),t=p(),Fe(o.$$.fragment),a(e,"class","h-screen")},m(l,h){O(l,e,h),n&&n.m(e,null),i(e,t),Ve(o,e,null),s=!0},p(l,[h]){l[0]?n&&(st(),ce(n,1,1,()=>{n=null}),tt()):n?(n.p(l,h),h&1&&H(n,1)):(n=Je(l),n.c(),H(n,1),n.m(e,t))},i(l){s||(H(n),H(o.$$.fragment,l),s=!0)},o(l){ce(n),ce(o.$$.fragment,l),s=!1},d(l){l&&U(e),n&&n.d(),Oe(o)}}}function vt(r,e,t){let o;ue(r,nt,n=>t(0,o=n)),mt();const s={"/":ht,"/bot/:instance/:room":rt({asyncComponent:()=>De(()=>import("./Bot.3e5d0546.js"),["assets/Bot.3e5d0546.js","assets/Bot.7961fba8.css","assets/vendor.0afdd21e.js"])}),"*":yt};return[o,s]}class _t extends ie{constructor(e){super();ae(this,e,vt,$t,le,{})}}new _t({target:document.getElementById("app")});export{ve as c};

var He=Object.defineProperty;var ze=(r,e,t)=>e in r?He(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var V=(r,e,t)=>(ze(r,typeof e!="symbol"?e+"":e,t),t),Pe=(r,e,t)=>{if(!e.has(r))throw TypeError("Cannot "+t)};var se=(r,e,t)=>(Pe(r,e,"read from private field"),t?t.call(r):e.get(r)),ne=(r,e,t)=>{if(e.has(r))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(r):e.set(r,t)},oe=(r,e,t,s)=>(Pe(r,e,"write to private field"),s?s.call(r,t):e.set(r,t),t);import{X as Se,m as Ye,y as Ge,$ as Ke,I as Qe,S as ie,i as ae,s as le,e as u,t as f,a,b as O,c as i,d as k,f as U,g as p,h as D,l as P,n as A,r as We,j as ue,k as Xe,o as Ze,p as $e,q as et,u as Fe,v as Ve,w as H,x as ce,z as Oe,A as tt,B as rt,R as st,C as nt,D as ot}from"./vendor.0afdd21e.js";const it=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function t(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerpolicy&&(o.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?o.credentials="include":n.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(n){if(n.ep)return;n.ep=!0;const o=t(n);fetch(n.href,o)}};it();const at="modulepreload",Ue={},lt="/",De=function(e,t){return!t||t.length===0?e():Promise.all(t.map(s=>{if(s=`${lt}${s}`,s in Ue)return;Ue[s]=!0;const n=s.endsWith(".css"),o=n?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${s}"]${o}`))return;const l=document.createElement("link");if(l.rel=n?"stylesheet":at,n||(l.as="script",l.crossOrigin=""),l.href=s,document.head.appendChild(l),n)return new Promise((h,w)=>{l.addEventListener("load",h),l.addEventListener("error",w)})})).then(()=>e())};class ut{constructor(e){V(this,"translator");this.api=e,Se.subscribe(t=>this.translator=t)}$t(e,t){return this.translator?this.translator(`plugins.${this.meta.id}.${e}`,t):""}}var z,Y,G;class ct{constructor(e){ne(this,z,void 0);ne(this,Y,void 0);ne(this,G,void 0);oe(this,z,e.videoThumbnails[0].url),oe(this,Y,e.title),oe(this,G,e.adaptiveFormats.filter(t=>t.encoding==="opus")[0].url)}get thumbnailUrl(){return se(this,z)}get title(){return se(this,Y)}get source(){return se(this,G)}}z=new WeakMap,Y=new WeakMap,G=new WeakMap;class dt extends ut{constructor(e){super(e);V(this,"meta",{id:"xyz.jimmi.music",name:"Music",version:"0.2.0"});V(this,"commands",{play:this.play.bind(this),queue:this.queue.bind(this),cue:this.queue.bind(this),track:this.track.bind(this)});V(this,"translations",{en:{description:"A music plugin that allows for audio playback of youtube videos",commands:{play:{usage:"!play <url|searchTerm> - Play a youtube video by url or search term",playingTrack:"Playing {title}"},queue:{usage:`!<queue|cue> - Show the current queue.
  !<queue|cue> <url|searchTerm> - Add a youtube video to the queue.
          `,isEmpty:"The queue is currently empty",content:"Queue content",addedTrack:"Added {title} to queue"},track:{usage:"`!track` - Display current track\n  `!track skip` - Skip the current track\n  `!track ++` or `!track --` - Fast forward or rewind. Add more `+` or `-` signs to increase duration\n  `!track +10`, `!track +20`, `!track -15` - Fast forward or rewind with specific duration in seconds\n          ",currentlyPlaying:"Currently playing {title ?? 'nothing'}"}},general:{invalidArgs:"Invalid arguments. Usage:",noVideo:"Sorry, I cannot find any video at the moment"}}});V(this,"baseUrl","https://invidious.snopyta.org");this.fetch.bind(this),this.searchYtVideo.bind(this),this.getTrack.bind(this),this.query.bind(this),this.play.bind(this),this.track.bind(this)}async fetch(e){return await(await fetch(`${this.baseUrl}/api/v1/${e}`,{referrerPolicy:"no-referrer"})).json()}async searchYtVideo(e){const t=await this.fetch(`search/?q=${encodeURIComponent(e)}`);return t.length>0?t[0].videoId:null}async getTrack(e){const t=await this.fetch(`videos/${e}`);return t.error?null:new ct(t)}async query(e){const t=e.join(" "),s=await this.searchYtVideo(t);return s?this.getTrack(s):null}async play(e){if(e.params.length===0)e.respond(`:warning: ${this.$t("general.invalidArgs")}
${this.$t("commands.play.usage")}`);else{const t=await this.query(e.params);if(!t){e.respond(`${this.$t("general.noVideo")} :worried:`);return}this.api.currentTrack=t,this.api.sendMessage(`:notes: ${this.$t("commands.play.playingTrack",{values:{title:t.title}})}`)}}async queue(e){if(e.params.length===0)if(this.api.queue.length===0)e.respond(`:notes: ${this.$t("commands.queue.isEmpty")}`);else{let t=0;const s=new RegExp(/(\d)/ig);e.respond(this.api.queue.reduce((n,o)=>`${n}
${(++t).toString().replaceAll(s,":$1:")} ${o.title}`,`:notes: ${this.$t("commands.queue.content")}`))}else{const t=await this.query(e.params);if(!t){e.respond(`${this.$t("general.noVideo")} :worried:`);return}this.api.currentTrack?this.api.queue.push(t):this.api.currentTrack=t,e.respond(`:notes: ${this.$t("commands.queue.addedTrack",{values:{title:t.title}})}`)}}async track(e){var t;switch(e.params.length){case 0:e.respond(`:notes: ${this.$t("commands.track.currentlyPlaying",{values:{title:(t=this.api.currentTrack)==null?void 0:t.title}})}`);break;case 1:const s=e.params[0];if(s==="skip"){this.api.currentTrack=void 0;return}let n=0;const o=l=>2*Math.E^l-1;/^\+\++$/.test(s)?n=o(s.length):/^--+$/.test(s)?n=-o(s.length):n=parseInt(s,10),n?this.api.forward(n):e.respond(`:warning: ${this.$t("general.invalidArgs")}
${this.$t("commands.track.usage")}`);break;default:e.respond(`:warning: ${this.$t("general.invalidArgs")}
${this.$t("commands.track.usage")}`)}}}const ve={default:{jitsiDisplayName:"DJ Jim",initialVolume:20},repoUrl:"https://github.com/p-fruck/Jimmi",url:"https://jimmi.xyz",logo:"/jim.svg",plugins:[dt]};function Me(r,e){if(r.length===0)return e;let t={};return t[r.pop()]=e,Me(r,t)}ve.plugins.forEach(r=>{const e=new r({});e.translations&&Object.keys(e.translations).forEach(t=>{const s=Me(e.meta.id.split("."),e.translations[t]);Ye(t,{plugins:s})})});Ge("en",()=>De(()=>import("./en.0ff1cf91.js"),[]));function mt(){Ke({fallbackLocale:"en",initialLocale:Qe()})}function Ne(r){let e,t=r[2]("routes.home.domainError")+"",s;return{c(){e=u("p"),s=f(t),a(e,"class","text-xs text-red-500 mt-3")},m(n,o){O(n,e,o),i(e,s)},p(n,o){o&4&&t!==(t=n[2]("routes.home.domainError")+"")&&k(s,t)},d(n){n&&U(e)}}}function Be(r){let e,t=r[2]("routes.home.roomError")+"",s;return{c(){e=u("p"),s=f(t),a(e,"class","text-xs text-red-500 mt-3")},m(n,o){O(n,e,o),i(e,s)},p(n,o){o&4&&t!==(t=n[2]("routes.home.roomError")+"")&&k(s,t)},d(n){n&&U(e)}}}function pt(r){let e,t,s,n,o=r[2]("routes.home.mainContent.heading")+"",l,h,w,$=r[2]("routes.home.mainContent.description")+"",x,T,d,g,R=r[2]("routes.home.joinRoomHeading")+"",C,v,q,M,K=r[2]("routes.home.domainLabel")+"",de,_e,_,ke,xe,L,N,Q=r[2]("routes.home.roomLabel")+"",me,qe,j,je,Ee,W,I,pe,X=r[2]("general.advancedConfiguration")+"",fe,Te,B,Z=r[2]("general.password")+"",he,Re,E,Ce,J,ee=r[2]("routes.home.joinButtonText")+"",ge,Le,S,te=r[2]("routes.home.joinRoomFootnote")+"",be,Ae,F,ye,re,we,Ie,b=r[3].domain&&Ne(r),y=r[3].room&&Be(r);return{c(){e=u("section"),t=u("div"),s=u("div"),n=u("h1"),l=f(o),h=p(),w=u("p"),x=f($),T=p(),d=u("form"),g=u("h2"),C=f(R),v=p(),q=u("div"),M=u("label"),de=f(K),_e=p(),_=u("input"),ke=p(),b&&b.c(),xe=p(),L=u("div"),N=u("label"),me=f(Q),qe=p(),j=u("input"),je=p(),y&&y.c(),Ee=p(),W=u("div"),I=u("details"),pe=u("summary"),fe=f(X),Te=p(),B=u("label"),he=f(Z),Re=p(),E=u("input"),Ce=p(),J=u("button"),ge=f(ee),Le=p(),S=u("p"),be=f(te),Ae=p(),F=u("a"),ye=f(r[1]),a(n,"class","title-font font-medium text-3xl text-gray-900"),a(w,"class","leading-relaxed mt-4"),a(s,"class","lg:w-3/5 md:w-1/2 md:pr-16 lg:pr-0 pr-0"),a(g,"class","text-gray-900 text-lg font-medium title-font mb-5"),a(M,"for","domain"),a(M,"class","leading-7 text-sm text-gray-600"),a(_,"type","text"),a(_,"id","domain"),a(_,"name","domain"),a(_,"placeholder","meet.jit.si"),a(_,"class","w-full bg-white rounded border border-gray-300 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 text-base outline-none text-gray-700 py-1 px-3 leading-8 transition-colors duration-200 ease-in-out"),a(q,"class","relative mb-4"),a(N,"for","room"),a(N,"class","leading-7 text-sm text-gray-600"),a(j,"type","text"),a(j,"id","room"),a(j,"name","room"),a(j,"class","w-full bg-white rounded border border-gray-300 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 text-base outline-none text-gray-700 py-1 px-3 leading-8 transition-colors duration-200 ease-in-out"),a(L,"class","relative mb-4"),a(B,"for","domain"),a(B,"class","leading-7 text-sm text-gray-600"),a(E,"type","password"),a(E,"id","password"),a(E,"name","password"),a(E,"class","w-full bg-white rounded border border-gray-300 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 text-base outline-none text-gray-700 py-1 px-3 leading-8 transition-colors duration-200 ease-in-out"),a(W,"class","relative mb-4"),a(J,"class","disabled:opacity-50 text-white bg-indigo-500 border-0 py-2 px-8 focus:outline-none hover:bg-indigo-600 rounded text-lg"),a(J,"type","submit"),a(F,"class","text-indigo-500 break-words"),a(F,"href",re=`https://${r[1]}`),a(S,"class","text-xs text-gray-500 mt-3"),a(d,"class","lg:w-2/6 md:w-1/2 bg-gray-100 rounded-lg p-8 flex flex-col md:ml-auto w-full mt-10 md:mt-0"),a(t,"class","container px-5 py-24 mx-auto flex flex-wrap items-center"),a(e,"class","text-gray-600 body-font")},m(c,m){O(c,e,m),i(e,t),i(t,s),i(s,n),i(n,l),i(s,h),i(s,w),i(w,x),i(t,T),i(t,d),i(d,g),i(g,C),i(d,v),i(d,q),i(q,M),i(M,de),i(q,_e),i(q,_),D(_,r[0].domain),i(q,ke),b&&b.m(q,null),i(d,xe),i(d,L),i(L,N),i(N,me),i(L,qe),i(L,j),D(j,r[0].room),i(L,je),y&&y.m(L,null),i(d,Ee),i(d,W),i(W,I),i(I,pe),i(pe,fe),i(I,Te),i(I,B),i(B,he),i(I,Re),i(I,E),D(E,r[0].password),i(d,Ce),i(d,J),i(J,ge),i(d,Le),i(d,S),i(S,be),i(S,Ae),i(S,F),i(F,ye),we||(Ie=[P(_,"change",r[6]),P(_,"input",r[8]),P(j,"change",r[6]),P(j,"input",r[9]),P(E,"change",r[6]),P(E,"input",r[10]),P(d,"submit",r[7])],we=!0)},p(c,[m]){m&4&&o!==(o=c[2]("routes.home.mainContent.heading")+"")&&k(l,o),m&4&&$!==($=c[2]("routes.home.mainContent.description")+"")&&k(x,$),m&4&&R!==(R=c[2]("routes.home.joinRoomHeading")+"")&&k(C,R),m&4&&K!==(K=c[2]("routes.home.domainLabel")+"")&&k(de,K),m&1&&_.value!==c[0].domain&&D(_,c[0].domain),c[3].domain?b?b.p(c,m):(b=Ne(c),b.c(),b.m(q,null)):b&&(b.d(1),b=null),m&4&&Q!==(Q=c[2]("routes.home.roomLabel")+"")&&k(me,Q),m&1&&j.value!==c[0].room&&D(j,c[0].room),c[3].room?y?y.p(c,m):(y=Be(c),y.c(),y.m(L,null)):y&&(y.d(1),y=null),m&4&&X!==(X=c[2]("general.advancedConfiguration")+"")&&k(fe,X),m&4&&Z!==(Z=c[2]("general.password")+"")&&k(he,Z),m&1&&E.value!==c[0].password&&D(E,c[0].password),m&4&&ee!==(ee=c[2]("routes.home.joinButtonText")+"")&&k(ge,ee),m&4&&te!==(te=c[2]("routes.home.joinRoomFootnote")+"")&&k(be,te),m&2&&k(ye,c[1]),m&2&&re!==(re=`https://${c[1]}`)&&a(F,"href",re)},i:A,o:A,d(c){c&&U(e),b&&b.d(),y&&y.d(),we=!1,We(Ie)}}}function ft(r,e,t){let s,n,o,l;ue(r,Se,v=>t(2,o=v));const h=new RegExp(/^$|^((?:(?:(?:\w[\.\-\+]?)*)\w)+)((?:(?:(?:\w[\.\-\+]?){0,62})\w)+)\.(\w{2,6})$/),w=new RegExp(/^[^?&:"'%#]+$/),{form:$,errors:x,handleChange:T,handleSubmit:d}=Xe({initialValues:{domain:"",room:"",password:""},validationSchema:Ze().shape({domain:$e().trim().matches(h),room:$e().trim().min(1).matches(w).required(),password:$e().optional()}),onSubmit:v=>{const q=v.password?`?password=${v.password}`:"";et(`/bot/${s}${q}`)}});ue(r,$,v=>t(0,n=v)),ue(r,x,v=>t(3,l=v));function g(){n.domain=this.value,$.set(n)}function R(){n.room=this.value,$.set(n)}function C(){n.password=this.value,$.set(n)}return r.$$.update=()=>{r.$$.dirty&1&&t(1,s=`${n.domain||"meet.jit.si"}/${n.room}`)},[n,s,o,l,$,x,T,d,g,R,C]}class ht extends ie{constructor(e){super();ae(this,e,ft,pt,le,{})}}function gt(r){let e;return{c(){e=u("p"),e.textContent="404 - Not found"},m(t,s){O(t,e,s)},p:A,i:A,o:A,d(t){t&&U(e)}}}class bt extends ie{constructor(e){super();ae(this,e,null,gt,le,{})}}function yt(r){let e,t,s,n,o,l,h,w,$,x,T,d,g,R;return{c(){e=u("footer"),t=u("div"),s=u("div"),n=u("div"),o=u("a"),l=f("JIMMI"),h=p(),w=u("p"),w.textContent="Still under heavy development",$=p(),x=u("div"),T=u("p"),d=f(`Fork me on
          `),g=u("a"),R=f("GitHub"),a(o,"href",ve.url),a(o,"class","ml-3 text-xl"),a(w,"class","text-sm text-gray-500 ml-4 pl-4 border-l-2 border-gray-200 sm:py-2 sm:mt-0"),a(n,"class","flex items-center md:justify-start justify-center text-gray-900"),a(g,"href",ve.repoUrl),a(g,"class","text-indigo-500 ml-1"),a(g,"target","_blank"),a(g,"rel","noopener noreferrer"),a(T,"class","text-sm text-gray-500"),a(x,"class","sm:ml-auto sm:py-2 sm:mt-0 mt-4 sm:text-left text-center text-gray-500 text-sm"),a(s,"class","container mx-auto py-4 px-5 flex flex-wrap flex-col sm:flex-row"),a(t,"class","bg-gray-100 "),a(e,"class","text-gray-600 body-font absolute bottom-0 w-screen")},m(C,v){O(C,e,v),i(e,t),i(t,s),i(s,n),i(n,o),i(o,l),i(n,h),i(n,w),i(s,$),i(s,x),i(x,T),i(T,d),i(T,g),i(g,R)},p:A,i:A,o:A,d(C){C&&U(e)}}}class wt extends ie{constructor(e){super();ae(this,e,null,yt,le,{})}}function Je(r){let e,t;return e=new st({props:{routes:r[1]}}),{c(){Fe(e.$$.fragment)},m(s,n){Ve(e,s,n),t=!0},p:A,i(s){t||(H(e.$$.fragment,s),t=!0)},o(s){ce(e.$$.fragment,s),t=!1},d(s){Oe(e,s)}}}function $t(r){let e,t,s,n,o=!r[0]&&Je(r);return s=new wt({}),{c(){e=u("main"),o&&o.c(),t=p(),Fe(s.$$.fragment),a(e,"class","h-screen")},m(l,h){O(l,e,h),o&&o.m(e,null),i(e,t),Ve(s,e,null),n=!0},p(l,[h]){l[0]?o&&(nt(),ce(o,1,1,()=>{o=null}),tt()):o?(o.p(l,h),h&1&&H(o,1)):(o=Je(l),o.c(),H(o,1),o.m(e,t))},i(l){n||(H(o),H(s.$$.fragment,l),n=!0)},o(l){ce(o),ce(s.$$.fragment,l),n=!1},d(l){l&&U(e),o&&o.d(),Oe(s)}}}function vt(r,e,t){let s;ue(r,ot,o=>t(0,s=o)),mt();const n={"/":ht,"/bot/:instance/:room":rt({asyncComponent:()=>De(()=>import("./Bot.01b3bf70.js"),["assets/Bot.01b3bf70.js","assets/Bot.7961fba8.css","assets/vendor.0afdd21e.js"])}),"*":bt};return[s,n]}class _t extends ie{constructor(e){super();ae(this,e,vt,$t,le,{})}}new _t({target:document.getElementById("app")});export{ve as c};

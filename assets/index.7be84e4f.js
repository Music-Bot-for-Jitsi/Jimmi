var Re=Object.defineProperty;var Le=(i,e,t)=>e in i?Re(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t;var A=(i,e,t)=>(Le(i,typeof e!="symbol"?e+"":e,t),t),ke=(i,e,t)=>{if(!e.has(i))throw TypeError("Cannot "+t)};var K=(i,e,t)=>(ke(i,e,"read from private field"),t?t.call(i):e.get(i)),Q=(i,e,t)=>{if(e.has(i))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(i):e.set(i,t)},W=(i,e,t,r)=>(ke(i,e,"write to private field"),r?r.call(i,t):e.set(i,t),t);import{X as we,m as Ae,y as Pe,$ as Ce,I as Ie,S as se,i as ae,s as le,e as c,t as $,a,b as V,c as s,d as _,f as O,g as b,h as X,l as F,n as P,r as Se,j as G,k as Ve,o as Oe,p as ue,q as Fe,u as De,v as Ne,w as Z,x as ce,z as Ue,A as Be,B as Me,R as ze,C as He,D as Je}from"./vendor.cdcc11b8.js";const Ye=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const u of o.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function t(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerpolicy&&(o.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?o.credentials="include":n.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(n){if(n.ep)return;n.ep=!0;const o=t(n);fetch(n.href,o)}};Ye();const Ke="modulepreload",ve={},Qe="/",qe=function(e,t){return!t||t.length===0?e():Promise.all(t.map(r=>{if(r=`${Qe}${r}`,r in ve)return;ve[r]=!0;const n=r.endsWith(".css"),o=n?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${r}"]${o}`))return;const u=document.createElement("link");if(u.rel=n?"stylesheet":Ke,n||(u.as="script",u.crossOrigin=""),u.href=r,document.head.appendChild(u),n)return new Promise((j,q)=>{u.addEventListener("load",j),u.addEventListener("error",q)})})).then(()=>e())};class We{constructor(e){A(this,"translator");this.api=e,we.subscribe(t=>this.translator=t)}$t(e,t){return this.translator?this.translator(`plugins.${this.meta.id}.${e}`,t):""}}var D,N,U;class Xe{constructor(e){Q(this,D,void 0);Q(this,N,void 0);Q(this,U,void 0);W(this,D,e.videoThumbnails[0].url),W(this,N,e.title),W(this,U,e.adaptiveFormats.filter(t=>t.encoding==="opus")[0].url)}get thumbnailUrl(){return K(this,D)}get title(){return K(this,N)}get source(){return K(this,U)}}D=new WeakMap,N=new WeakMap,U=new WeakMap;class Ge extends We{constructor(e){super(e);A(this,"meta",{id:"xyz.jimmi.music",name:"Music",version:"0.2.0"});A(this,"commands",{play:this.play.bind(this),queue:this.queue.bind(this),cue:this.queue.bind(this),track:this.track.bind(this)});A(this,"translations",{en:{description:"A music plugin that allows for audio playback of youtube videos",commands:{play:{usage:"!play <url|searchTerm> - Play a youtube video by url or search term",playingTrack:"Playing {title}"},queue:{usage:`!<queue|cue> - Show the current queue.
  !<queue|cue> <url|searchTerm> - Add a youtube video to the queue.
          `,isEmpty:"The queue is currently empty",content:"Queue content",addedTrack:"Added {title} to queue"},track:{usage:"`!track` - Display current track\n  `!track skip` - Skip the current track\n  `!track ++` or `!track --` - Fast forward or rewind. Add more `+` or `-` signs to increase duration\n  `!track +10`, `!track +20`, `!track -15` - Fast forward or rewind with specific duration in seconds\n          ",currentlyPlaying:"Currently playing {title ?? 'nothing'}"}},general:{invalidArgs:"Invalid arguments. Usage:",noVideo:"Sorry, I cannot find any video at the moment"}}});A(this,"baseUrl","https://invidious.snopyta.org");this.fetch.bind(this),this.searchYtVideo.bind(this),this.getTrack.bind(this),this.query.bind(this),this.play.bind(this),this.track.bind(this)}async fetch(e){return await(await fetch(`${this.baseUrl}/api/v1/${e}`,{referrerPolicy:"no-referrer"})).json()}async searchYtVideo(e){const t=await this.fetch(`search/?q=${encodeURIComponent(e)}`);return t.length>0?t[0].videoId:null}async getTrack(e){const t=await this.fetch(`videos/${e}`);return t.error?null:new Xe(t)}async query(e){const t=e.join(" "),r=await this.searchYtVideo(t);return r?this.getTrack(r):null}async play(e){if(e.params.length===0)e.respond(`:warning: ${this.$t("general.invalidArgs")}
${this.$t("commands.play.usage")}`);else{const t=await this.query(e.params);if(!t){e.respond(`${this.$t("general.noVideo")} :worried:`);return}this.api.currentTrack=t,this.api.sendMessage(`:notes: ${this.$t("commands.play.playingTrack",{values:{title:t.title}})}`)}}async queue(e){if(e.params.length===0)if(this.api.queue.length===0)e.respond(`:notes: ${this.$t("commands.queue.isEmpty")}`);else{let t=0;const r=new RegExp(/(\d)/ig);e.respond(this.api.queue.reduce((n,o)=>`${n}
${(++t).toString().replaceAll(r,":$1:")} ${o.title}`,`:notes: ${this.$t("commands.queue.content")}`))}else{const t=await this.query(e.params);if(!t){e.respond(`${this.$t("general.noVideo")} :worried:`);return}this.api.currentTrack?this.api.queue.push(t):this.api.currentTrack=t,e.respond(`:notes: ${this.$t("commands.queue.addedTrack",{values:{title:t.title}})}`)}}async track(e){var t;switch(e.params.length){case 0:e.respond(`:notes: ${this.$t("commands.track.currentlyPlaying",{values:{title:(t=this.api.currentTrack)==null?void 0:t.title}})}`);break;case 1:const r=e.params[0];if(r==="skip"){this.api.currentTrack=void 0;return}let n=0;const o=u=>2*Math.E^u-1;/^\+\++$/.test(r)?n=o(r.length):/^--+$/.test(r)?n=-o(r.length):n=parseInt(r,10),n?this.api.forward(n):e.respond(`:warning: ${this.$t("general.invalidArgs")}
${this.$t("commands.track.usage")}`);break;default:e.respond(`:warning: ${this.$t("general.invalidArgs")}
${this.$t("commands.track.usage")}`)}}}const Ze={default:{jitsiDisplayName:"DJ Jim",initialVolume:20},url:"https://jimmi.xyz",logo:"/jim.svg",plugins:[Ge]};function je(i,e){if(i.length===0)return e;let t={};return t[i.pop()]=e,je(i,t)}Ze.plugins.forEach(i=>{const e=new i({});e.translations&&Object.keys(e.translations).forEach(t=>{const r=je(e.meta.id.split("."),e.translations[t]);Ae(t,{plugins:r})})});Pe("en",()=>qe(()=>import("./en.5b2f3bfa.js"),[]));function et(){Ce({fallbackLocale:"en",initialLocale:Ie()})}function Ee(i){let e,t=i[2]("routes.home.domainError")+"",r;return{c(){e=c("p"),r=$(t),a(e,"class","text-xs text-red-500 mt-3")},m(n,o){V(n,e,o),s(e,r)},p(n,o){o&4&&t!==(t=n[2]("routes.home.domainError")+"")&&_(r,t)},d(n){n&&O(e)}}}function Te(i){let e,t=i[2]("routes.home.roomError")+"",r;return{c(){e=c("p"),r=$(t),a(e,"class","text-xs text-red-500 mt-3")},m(n,o){V(n,e,o),s(e,r)},p(n,o){o&4&&t!==(t=n[2]("routes.home.roomError")+"")&&_(r,t)},d(n){n&&O(e)}}}function tt(i){let e,t,r,n,o=i[2]("routes.home.mainContent.heading")+"",u,j,q,k=i[2]("routes.home.mainContent.description")+"",E,B,d,T,x=i[2]("routes.home.joinRoomHeading")+"",y,de,w,C,M=i[2]("routes.home.domainLabel")+"",ee,me,p,he,fe,v,I,z=i[2]("routes.home.roomLabel")+"",te,pe,g,ge,be,S,H=i[2]("routes.home.joinButtonText")+"",re,ye,R,J=i[2]("routes.home.joinRoomFootnote")+"",ie,$e,L,ne,Y,oe,_e,h=i[3].domain&&Ee(i),f=i[3].room&&Te(i);return{c(){e=c("section"),t=c("div"),r=c("div"),n=c("h1"),u=$(o),j=b(),q=c("p"),E=$(k),B=b(),d=c("form"),T=c("h2"),y=$(x),de=b(),w=c("div"),C=c("label"),ee=$(M),me=b(),p=c("input"),he=b(),h&&h.c(),fe=b(),v=c("div"),I=c("label"),te=$(z),pe=b(),g=c("input"),ge=b(),f&&f.c(),be=b(),S=c("button"),re=$(H),ye=b(),R=c("p"),ie=$(J),$e=b(),L=c("a"),ne=$(i[1]),a(n,"class","title-font font-medium text-3xl text-gray-900"),a(q,"class","leading-relaxed mt-4"),a(r,"class","lg:w-3/5 md:w-1/2 md:pr-16 lg:pr-0 pr-0"),a(T,"class","text-gray-900 text-lg font-medium title-font mb-5"),a(C,"for","domain"),a(C,"class","leading-7 text-sm text-gray-600"),a(p,"type","text"),a(p,"id","domain"),a(p,"name","domain"),a(p,"placeholder","meet.jit.si"),a(p,"class","w-full bg-white rounded border border-gray-300 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 text-base outline-none text-gray-700 py-1 px-3 leading-8 transition-colors duration-200 ease-in-out"),a(w,"class","relative mb-4"),a(I,"for","room"),a(I,"class","leading-7 text-sm text-gray-600"),a(g,"type","text"),a(g,"id","room"),a(g,"name","room"),a(g,"class","w-full bg-white rounded border border-gray-300 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 text-base outline-none text-gray-700 py-1 px-3 leading-8 transition-colors duration-200 ease-in-out"),a(v,"class","relative mb-4"),a(S,"class","disabled:opacity-50 text-white bg-indigo-500 border-0 py-2 px-8 focus:outline-none hover:bg-indigo-600 rounded text-lg"),a(S,"type","submit"),a(L,"class","text-indigo-500 break-words"),a(L,"href",Y=`https://${i[1]}`),a(R,"class","text-xs text-gray-500 mt-3"),a(d,"class","lg:w-2/6 md:w-1/2 bg-gray-100 rounded-lg p-8 flex flex-col md:ml-auto w-full mt-10 md:mt-0"),a(t,"class","container px-5 py-24 mx-auto flex flex-wrap items-center"),a(e,"class","text-gray-600 body-font")},m(l,m){V(l,e,m),s(e,t),s(t,r),s(r,n),s(n,u),s(r,j),s(r,q),s(q,E),s(t,B),s(t,d),s(d,T),s(T,y),s(d,de),s(d,w),s(w,C),s(C,ee),s(w,me),s(w,p),X(p,i[0].domain),s(w,he),h&&h.m(w,null),s(d,fe),s(d,v),s(v,I),s(I,te),s(v,pe),s(v,g),X(g,i[0].room),s(v,ge),f&&f.m(v,null),s(d,be),s(d,S),s(S,re),s(d,ye),s(d,R),s(R,ie),s(R,$e),s(R,L),s(L,ne),oe||(_e=[F(p,"change",i[6]),F(p,"input",i[8]),F(g,"change",i[6]),F(g,"input",i[9]),F(d,"submit",i[7])],oe=!0)},p(l,[m]){m&4&&o!==(o=l[2]("routes.home.mainContent.heading")+"")&&_(u,o),m&4&&k!==(k=l[2]("routes.home.mainContent.description")+"")&&_(E,k),m&4&&x!==(x=l[2]("routes.home.joinRoomHeading")+"")&&_(y,x),m&4&&M!==(M=l[2]("routes.home.domainLabel")+"")&&_(ee,M),m&1&&p.value!==l[0].domain&&X(p,l[0].domain),l[3].domain?h?h.p(l,m):(h=Ee(l),h.c(),h.m(w,null)):h&&(h.d(1),h=null),m&4&&z!==(z=l[2]("routes.home.roomLabel")+"")&&_(te,z),m&1&&g.value!==l[0].room&&X(g,l[0].room),l[3].room?f?f.p(l,m):(f=Te(l),f.c(),f.m(v,null)):f&&(f.d(1),f=null),m&4&&H!==(H=l[2]("routes.home.joinButtonText")+"")&&_(re,H),m&4&&J!==(J=l[2]("routes.home.joinRoomFootnote")+"")&&_(ie,J),m&2&&_(ne,l[1]),m&2&&Y!==(Y=`https://${l[1]}`)&&a(L,"href",Y)},i:P,o:P,d(l){l&&O(e),h&&h.d(),f&&f.d(),oe=!1,Se(_e)}}}function rt(i,e,t){let r,n,o,u;G(i,we,y=>t(2,o=y));const j=new RegExp(/^$|^((?:(?:(?:\w[\.\-\+]?)*)\w)+)((?:(?:(?:\w[\.\-\+]?){0,62})\w)+)\.(\w{2,6})$/),q=new RegExp(/^[^?&:"'%#]+$/),{form:k,errors:E,handleChange:B,handleSubmit:d}=Ve({initialValues:{domain:"",room:""},validationSchema:Oe().shape({domain:ue().trim().matches(j),test:ue(),room:ue().trim().min(1).matches(q).required()}),onSubmit:y=>{Fe(`/bot/${r}`)}});G(i,k,y=>t(0,n=y)),G(i,E,y=>t(3,u=y));function T(){n.domain=this.value,k.set(n)}function x(){n.room=this.value,k.set(n)}return i.$$.update=()=>{i.$$.dirty&1&&t(1,r=`${n.domain||"meet.jit.si"}/${n.room}`)},[n,r,o,u,k,E,B,d,T,x]}class it extends se{constructor(e){super();ae(this,e,rt,tt,le,{})}}function nt(i){let e;return{c(){e=c("p"),e.textContent="404 - Not found"},m(t,r){V(t,e,r)},p:P,i:P,o:P,d(t){t&&O(e)}}}class ot extends se{constructor(e){super();ae(this,e,null,nt,le,{})}}function xe(i){let e,t;return e=new ze({props:{routes:i[1]}}),{c(){De(e.$$.fragment)},m(r,n){Ne(e,r,n),t=!0},p:P,i(r){t||(Z(e.$$.fragment,r),t=!0)},o(r){ce(e.$$.fragment,r),t=!1},d(r){Ue(e,r)}}}function st(i){let e,t,r=!i[0]&&xe(i);return{c(){e=c("main"),r&&r.c(),a(e,"class","h-screen")},m(n,o){V(n,e,o),r&&r.m(e,null),t=!0},p(n,[o]){n[0]?r&&(He(),ce(r,1,1,()=>{r=null}),Be()):r?(r.p(n,o),o&1&&Z(r,1)):(r=xe(n),r.c(),Z(r,1),r.m(e,null))},i(n){t||(Z(r),t=!0)},o(n){ce(r),t=!1},d(n){n&&O(e),r&&r.d()}}}function at(i,e,t){let r;G(i,Je,o=>t(0,r=o)),et();const n={"/":it,"/bot/:instance/:room":Me({asyncComponent:()=>qe(()=>import("./Bot.d2797e8d.js"),["assets/Bot.d2797e8d.js","assets/Bot.410f3981.css","assets/vendor.cdcc11b8.js"])}),"*":ot};return[r,n]}class lt extends se{constructor(e){super();ae(this,e,at,st,le,{})}}new lt({target:document.getElementById("app")});export{Ze as c};
